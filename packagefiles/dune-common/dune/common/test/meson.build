# This file is part of https://github.com/KurtBoehm/tlaxcaltin.
#
# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at https://mozilla.org/MPL/2.0/.

# TODO Some tests do not work for some reason and have been disabled
foreach name, info : {
  'AlignedAllocator': ['alignedallocatortest.cc', true],
  'ArithmeticTestSuite': ['arithmetictestsuitetest.cc', true],
  'ArrayList': ['arraylisttest.cc', true],
  'Array': ['arraytest.cc', true],
  'AssertAndReturn': ['assertandreturntest.cc', true],
  'AutoCopy': ['autocopytest.cc', true],
  'BigUnsignedInt': ['bigunsignedinttest.cc', true],
  'BitSetVector': ['bitsetvectortest.cc', true],
  'BoundsCheckingMv': ['boundscheckingmvtest.cc', true],
  'BoundsCheckingOp': ['boundscheckingoptest.cc', true],
  'BoundsChecking': ['boundscheckingtest.cc', true],
  'Callonce': ['calloncetest.cc', true],
  'CheckFVectorSize': ['check_fvector_size.cc', true],
  # 'CheckFVectorSizeFail': ['check_fvector_size_fail.cc', true],
  'ClassName': ['classnametest.cc', true],
  'Concept': ['concept.cc', true],
  'ConstexprIfElse': ['constexprifelsetest.cc', true],
  'DebugAlign': ['debugaligntest.cc', true],
  'DenseMatrixAssignment': ['densematrixassignmenttest.cc', true],
  'DenseVectorAssignment': ['densevectorassignmenttest.cc', true],
  'DenseVector': ['densevectortest.cc', true],
  'DiagonalMatrix': ['diagonalmatrixtest.cc', true],
  'DynMatrix': ['dynmatrixtest.cc', true],
  'DynVector': ['dynvectortest.cc', true],
  'Eigenvalues': ['eigenvaluestest.cc', true],
  'EnumSet': ['enumsettest.cc', true],
  'FilledArray': ['filledarraytest.cc', true],
  'FMatrix': ['fmatrixtest.cc', true],
  'Function': ['functiontest.cc', true],
  'FVectorConversion1d': ['fvectorconversion1d.cc', true],
  'FVector': ['fvectortest.cc', true],
  # 'GenericIteratorCompileFail': ['genericiterator_compile_fail.cc', true],
  'HybridUtilities': ['hybridutilitiestest.cc', true],
  'Indices': ['indicestest.cc', true],
  'IsCallable': ['iscallabletest.cc', true],
  'IteratorFacade2': ['iteratorfacadetest2.cc', true],
  'IteratorFacade1': ['iteratorfacadetest.cc', true],
  'LRU': ['lrutest.cc', true],
  'MathClassifiers': ['mathclassifierstest.cc', true],
  'Math': ['mathtest.cc', true],
  'METIS': ['metistest.cc', with_metis or with_scotch],
  'MPICollectivecommunicaTion': ['mpicollectivecommunication.cc', true],
  'MPICommunication': ['mpicommunicationtest.cc', true],
  'MPIGuard': ['mpiguardtest.cc', true],
  'MPIHelper': ['mpihelpertest.cc', true],
  'OverloadSet': ['overloadsettest.cc', true],
  # 'ParameterizedObjectFactorySingleton': ['parameterizedobjectfactorysingleton.cc', true],
  'ParameterizedObject': ['parameterizedobjecttest.cc', true],
  'ParameterTreelocale': ['parametertreelocaletest.cc', true],
  'ParameterTree': ['parametertreetest.cc', true],
  'Parmetis': ['parmetistest.cc', with_parmetis or with_ptscotch],
  'Path': ['pathtest.cc', true],
  'PoolAllocator': ['poolallocatortest.cc', true],
  'Power': ['powertest.cc', true],
  'QuadMath': ['quadmathtest.cc', has_quadmath],
  'RangeUtilities': ['rangeutilitiestest.cc', true],
  'ReferenceHelper': ['referencehelpertest.cc', true],
  'ReservedVector': ['reservedvectortest.cc', true],
  'Scotch': ['scotchtest.cc', with_scotch],
  'SharedPtr': ['shared_ptrtest.cc', true],
  'Singleton': ['singletontest.cc', true],
  'SLList': ['sllisttest.cc', true],
  'StdApply': ['stdapplytest.cc', true],
  'StdCheckTypes': ['stdchecktypes.cc', true],
  'StdIdentity': ['stdidentity.cc', true],
  'StreamOperators': ['streamoperatorstest.cc', true],
  'Stream': ['streamtest.cc', true],
  'StringUtility': ['stringutilitytest.cc', true],
  'DebugAllocator': ['testdebugallocator.cc', true],
  'FloatCmp': ['testfloatcmp.cc', true],
  # 'Timing': ['timing.cc', true],
  'Transpose': ['transposetest.cc', true],
  'TupleUtility': ['tupleutilitytest.cc', true],
  'TypeList': ['typelisttest.cc', true],
  'TypeUtility': ['typeutilitytest.cc', true],
  'Utility': ['utilitytest.cc', true],
  'VcExpectedImpl': ['vcexpectedimpltest.cc', true],
  'Version': ['versiontest.cc', true],
}
  sources = info[0]
  is_enabled = info[1]
  if is_enabled
    test(
      name,
      executable(
        name + 'Test',
        sources,
        dependencies: [dune_common_dep],
      ),
    )
  endif
endforeach
